<h1>
  <%= @the_provider.full_name %>
</h1>

<div>
  <img src="<%= @the_provider.image %>" width="250px">
</div>

<div>
  <h1>
    $<%= @the_provider.price.to_i %>/hr
  </h1>
</div>

<div>
  <% if @current_user == nil && @current_provider == nil %>
    <a href="/sign_in_split">
      <button class="button">Sign in to email</button>
    </a>
  <% else %>
    <a href="mailto:<%= @the_provider.email %>" target="_blank">
      <button class="button">Email</button>
    </a>
  <% end %>
</div>

<% if @current_provider != nil %>
  <% if @current_provider.id == @the_provider.id %>
    <form action="/provider/<%= @current_provider.id %>/edit" method="get">
      <button>Edit</button>
    </form>
    <form action="/provider_sign_out" method="get">
      <button>Sign Out</button>
    </form>
  <% else %>
  <% end %>
<% else %>
<% end %>

<h3>
  Description
</h3>

<p>
  <%= @the_provider.description %>
</p>

<div class="card">
  <div class="card-header">
    Languages
  </div>
  <ul class="list-group list-group-flush">
    <% @the_provider.languages.each do |a_language| %>
      <li class="list-group-item">
        <%= a_language.name %>
      </li>
    <% end %>
  </ul>
</div>

<div class="card">
  <div class="card-header">
    Neighborhoods
  </div>
  <ul class="list-group list-group-flush">
    <% @the_provider.neighborhoods.each do |a_neighborhood| %>
      <li class="list-group-item">
        <%= a_neighborhood.name %>
      </li>
    <% end %>
  </ul>
</div>

<div class="card">
  <div class="card-header">
    Special Needs Experience
  </div>
  <ul class="list-group list-group-flush">
    <% @the_provider.needs.each do |a_need| %>
      <li class="list-group-item">
        <%= a_need.name %>
      </li>
    <% end %>
  </ul>
</div>

<div class="card">
  <div class="card-header">
    Skills
  </div>
  <ul class="list-group list-group-flush">
    <% @the_provider.skills.each do |a_skill| %>
      <li class="list-group-item">
        <%= a_skill.task.name %>
      </li>
    <% end %>
  </ul>
</div>

<div class="card">
  <div class="card-header">
    Payment
  </div>
  <ul class="list-group list-group-flush">
    <% @the_provider.payment_accepteds.each do |a_payment_acc| %>
      <li class="list-group-item">
        <%= a_payment_acc.payment_type.name %>
      </li>
    <% end %>
  </ul>
</div>

<div class="card">
  <div class="card-header">
    Reviews
  </div>



<% if @current_user != nil %>
  <form action="/insert_review" method="post" enctype="multipart/form-data">

  <div>
    <label for="title">Title</label>
    <input id="title" name="query_title" type="text">
  </div>

  <div>
    <label for="description">Description</label>
    <textarea id="description" name="query_description">
    </textarea>
  </div>
  
  <div>
    <label for="provider_id"></label>
    <input id="provider_id" name="query_provider_id" type="hidden" value="<%= @the_provider.id %>">
  </div>

  <div>
    <label for="author_id"></label>
    <input id="author_id" name="query_author_id" type="hidden">
  </div>

  <button>
    Post a Review
  </button>

  </form>
<% else %>
<% end %>

<ul class="list-group">

    <% @the_provider.reviews.each do |a_review| %>

        <li class="list-group-item active">
          <%= a_review.title %>
        </li>

        <li class="list-group-item">
          <%= a_review.description %>
        </li>

        <li class="list-group-item">
          Author: <%= a_review.user.first_name %>
        </li>

      <% if @current_user != nil %>
        <% if a_review.author_id == @current_user.id %>
          <td>
            <a href="/delete_review/<%= a_review.id %>">
              Remove
            </a>
          </td>
        <% else %>
        <% end %>
      <% else %>
      <% end %>
      </ul>

    <% end %>
  </table>
</div>